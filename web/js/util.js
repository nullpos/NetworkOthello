
function rgbToHex(r, g, b) {
  return parseInt('0x' +
    (function(n) {
      return new Array(7 - n.length).join('0') + n;
    })((r << 16 | g << 8 | b).toString(16))
  , 16);
}

function lrgb(i, c) {
  var l = rgbTable.length;
  return rgbTable[parseInt(parseFloat(i) / 255 * (l-1))][c] * 255;
}

var weight = [
  [0, 1, 2, 3, 3, 2, 1, 0],
  [1, 4, 5, 6, 6, 5, 4, 1],
  [2, 5, 7, 8, 8, 7, 5, 2],
  [3, 6, 8, 9, 9, 8, 6, 3],
  [3, 6, 8, 9, 9, 8, 6, 3],
  [2, 5, 7, 8, 8, 7, 5, 2],
  [1, 4, 5, 6, 6, 5, 4, 1],
  [0, 1, 2, 3, 3, 2, 1, 0]
];

var rgbTable = [
    { R:0.06076 ,G:0.00000 ,B:0.11058 }
   ,{ R:0.08700 ,G:0.00000 ,B:0.16790 }
   ,{ R:0.13772 ,G:0.00000 ,B:0.26354 }
   ,{ R:0.20707 ,G:0.00000 ,B:0.39852 }
   ,{ R:0.31129 ,G:0.00000 ,B:0.60684 }
   ,{ R:0.39930 ,G:0.00000 ,B:0.80505 }
   ,{ R:0.40542 ,G:0.00000 ,B:0.87684 }
   ,{ R:0.34444 ,G:0.00000 ,B:0.88080 }
   ,{ R:0.11139 ,G:0.00000 ,B:0.86037 }
   ,{ R:0.00000 ,G:0.15233 ,B:0.77928 }
   ,{ R:0.00000 ,G:0.38550 ,B:0.65217 }
   ,{ R:0.00000 ,G:0.49412 ,B:0.51919 }
   ,{ R:0.00000 ,G:0.59271 ,B:0.40008 }
   ,{ R:0.00000 ,G:0.69549 ,B:0.25749 }
   ,{ R:0.00000 ,G:0.77773 ,B:0.00000 }
   ,{ R:0.00000 ,G:0.81692 ,B:0.00000 }
   ,{ R:0.00000 ,G:0.82625 ,B:0.00000 }
   ,{ R:0.00000 ,G:0.81204 ,B:0.00000 }
   ,{ R:0.47369 ,G:0.77626 ,B:0.00000 }
   ,{ R:0.70174 ,G:0.71523 ,B:0.00000 }
   ,{ R:0.84922 ,G:0.62468 ,B:0.00000 }
   ,{ R:0.94726 ,G:0.49713 ,B:0.00000 }
   ,{ R:0.99803 ,G:0.31072 ,B:0.00000 }
   ,{ R:1.00000 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.95520 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.86620 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.76170 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.64495 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.52857 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.41817 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.33202 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.25409 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.19695 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.15326 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.11902 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.09063 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.06898 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.05150 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.04264 ,G:0.00000 ,B:0.00000 }
   ,{ R:0.03666 ,G:0.00000 ,B:0.00794 }
   ,{ R:0.00000 ,G:0.00000 ,B:0.00000 }
];
